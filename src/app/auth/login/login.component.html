<div class="main-container">
  <div class="card">
  <!-- Left Side - Image Section -->
  <div class="left-section">
    <!-- <div class="image-overlay"> -->
       <img src="/assets/Images/Wed_Login.png" alt="Wedding" class="overlay-img">
      <!-- <h1 class="main-title">India's Favourite Wedding Planning Platform</h1> -->
    <!-- </div> -->
  </div>

  <!-- Right Side - Login Form -->
  <div class="right-section">
    <button class="close-btn" (click)="onClose()">×</button>
    
    <div class="login-form">
      <h2 class="form-title">Sign In/Sign Up</h2>
      
      <!-- Step 1: Phone/Email Input -->
      <div *ngIf="currentStep === 'phone'" class="step-container">
        <form [formGroup]="phoneForm" (ngSubmit)="onPhoneSubmit()">
          <div class="input-group">
            <div class="input-wrapper">
              <input
                type="text"
                placeholder="Enter email or mobile*"
                formControlName="phoneOrEmail"
                class="form-input"
                [class.error]="isFieldInvalid(phoneForm, 'phoneOrEmail')"
              />
              <button type="button" class="clear-btn" *ngIf="phoneForm.get('phoneOrEmail')?.value" (click)="clearInput()">
                ×
              </button>
            </div>
            <div *ngIf="isFieldInvalid(phoneForm, 'phoneOrEmail')" class="error-message">
              {{ getFieldError(phoneForm, 'phoneOrEmail') }}
            </div>
            
            <button
              type="submit"
              class="continue-btn"
              [disabled]="phoneForm.invalid || isLoading"
            >
              <span *ngIf="!isLoading">Continue</span>
              <div *ngIf="isLoading" class="loading-spinner"></div>
            </button>
          </div>
        </form>
        
        <div class="separator">
          <span>OR</span>
        </div>
        
        <div class="social-login">
          <button class="social-btn facebook-btn">
            Continue With Facebook
          </button>
          <button class="social-btn google-btn">
            Continue With Google
          </button>
        </div>
      </div>

      <!-- Step 2: User Details -->
      <div *ngIf="currentStep === 'details'" class="step-container">
        <form [formGroup]="detailsForm" (ngSubmit)="onDetailsSubmit()">
          <div class="input-group">
            <div class="input-wrapper">
              <input
                type="text"
                placeholder="First Name*"
                formControlName="firstName"
                class="form-input"
                [class.error]="isFieldInvalid(detailsForm, 'firstName')"
              />
            </div>
            <div *ngIf="isFieldInvalid(detailsForm, 'firstName')" class="error-message">
              {{ getFieldError(detailsForm, 'firstName') }}
            </div>

            <div class="input-wrapper">
              <input
                type="text"
                placeholder="Last Name*"
                formControlName="lastName"
                class="form-input"
                [class.error]="isFieldInvalid(detailsForm, 'lastName')"
              />
            </div>
            <div *ngIf="isFieldInvalid(detailsForm, 'lastName')" class="error-message">
              {{ getFieldError(detailsForm, 'lastName') }}
            </div>

            <div class="input-wrapper">
              <input
                type="email"
                placeholder="Email Address*"
                formControlName="email"
                class="form-input"
                [class.error]="isFieldInvalid(detailsForm, 'email')"
              />
            </div>
            <div *ngIf="isFieldInvalid(detailsForm, 'email')" class="error-message">
              {{ getFieldError(detailsForm, 'email') }}
            </div>
            
            <button
              type="submit"
              class="continue-btn"
              [disabled]="detailsForm.invalid || isLoading"
            >
              <span *ngIf="!isLoading">Submit</span>
              <div *ngIf="isLoading" class="loading-spinner"></div>
            </button>
          </div>
        </form>
      </div>

      <!-- Step 3: OTP Verification -->
      <div *ngIf="currentStep === 'otp'" class="step-container">
        <div class="otp-info">
          <p>We've sent a verification code to</p>
          <p class="phone-number">+91 {{ userPhone }}</p>
        </div>

        <form [formGroup]="otpForm" (ngSubmit)="onOtpSubmit()">
          <div class="input-group">
            <div class="input-wrapper">
              <input
                type="text"
                placeholder="Enter OTP"
                formControlName="otp"
                class="form-input otp-input"
                [class.error]="isFieldInvalid(otpForm, 'otp')"
                maxlength="6"
              />
            </div>
            <div *ngIf="isFieldInvalid(otpForm, 'otp')" class="error-message">
              {{ getFieldError(otpForm, 'otp') }}
            </div>

            <div class="resend-section">
              <button type="button" class="resend-btn" (click)="resendOtp()">
                Resend OTP
              </button>
            </div>
            
            <button
              type="submit"
              class="continue-btn"
              [disabled]="otpForm.invalid || isLoading"
            >
              <span *ngIf="!isLoading">Verify</span>
              <div *ngIf="isLoading" class="loading-spinner"></div>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  </div>
</div>